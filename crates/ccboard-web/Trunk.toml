# Trunk build configuration for Leptos CSR
[build]
target = "index.html"
dist = "dist"
public_url = "/"
# Use hydrate feature for client-side WASM build (Leptos 0.7 terminology for CSR mode)
no_default_features = true
features = ["hydrate"]

# WASM optimization (reduce bundle size from ~7.5MB to <2MB target)
# Uses wasm-opt from binaryen toolchain for aggressive compression
[build.wasm-opt]
optimization_level = "z" # Aggressive size optimization (z > s > 2)
# Note: This adds ~30s to build time but reduces bundle 60-70%

[watch]
watch = ["src"]

[serve]
port = 3333
addresses = ["127.0.0.1"]
