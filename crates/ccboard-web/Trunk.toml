# Trunk build configuration for Leptos CSR
[build]
target = "index.html"
dist = "dist"
public_url = "/"
# Use csr feature for pure client-side rendering (no SSR)
no_default_features = true
features = ["csr"]

# WASM optimization
# NOTE: wasm-opt disabled due to bulk-memory validation errors
# Cargo opt-level="z" + lto="fat" still provide ~30-40% size reduction
# TODO: Re-enable wasm-opt with proper --enable-bulk-memory config
[build.wasm-opt]
skip = true # Explicitly disable wasm-opt

[watch]
watch = ["src"]

[serve]
port = 3333
addresses = ["127.0.0.1"]
